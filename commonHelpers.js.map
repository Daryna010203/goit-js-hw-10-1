{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputBtn = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button');\nconst dayElm = document.querySelector(\"[data-days]\");\nconst hourElm = document.querySelector(\"[data-hours]\");\nconst minuteElm = document.querySelector(\"[data-minutes]\");\nconst secondElm = document.querySelector('[data-seconds]')\n\nstartBtn.disabled = true;\nlet intervalId;\nlet userSelectedDate = '';\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  position: 'auto center',\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectDatetime = selectedDates[0];\n    const date = new Date();\n    if (selectDatetime <= date) {\n      startBtn.disabled = true;\n      iziToast.error({\n        title: \"Invalid date\",\n        message: \"Please choose a date in the future\",\n        position: 'center'\n        });        \n    } else {\n      userSelectedDate = selectDatetime;\n      startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction onBtnClick () {\n      inputBtn.setAttribute(\"disabled\", true);\n      startBtn.disabled = true;\n  intervalId = setInterval(() => {\n    const nowDate = new Date();\n    const deltaTime = userSelectedDate - nowDate;    \n    if (deltaTime <= 0) {\n      \n      clearInterval(intervalId);\n      inputBtn.removeAttribute(\"disabled\");       \n      return\n    }\n    const time = convertMs(deltaTime);\n    updateTimerUI(time.days, time.hours, time.minutes, time.seconds);\n  }, 1000);\n}\n\n\nstartBtn.addEventListener('click', onBtnClick);\n\n\n  function updateTimerUI(days, hours, minutes, seconds) {\n    dayElm.textContent = addLeadingZero(days);\n    hourElm.textContent = addLeadingZero(hours);\n    minuteElm.textContent = addLeadingZero(minutes);\n    secondElm.textContent = addLeadingZero(seconds);\n  }\n  \n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0')\n  }\n  \n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}"],"names":["inputBtn","startBtn","dayElm","hourElm","minuteElm","secondElm","intervalId","userSelectedDate","options","selectedDates","selectDatetime","iziToast","flatpickr","onBtnClick","deltaTime","time","convertMs","updateTimerUI","days","hours","minutes","seconds","addLeadingZero","value","ms"],"mappings":"+IAKA,MAAMA,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAW,SAAS,cAAc,QAAQ,EAC1CC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAEzDJ,EAAS,SAAW,GACpB,IAAIK,EACAC,EAAmB,GAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,SAAU,cACV,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAiBD,EAAc,CAAC,EAElCC,GADS,IAAI,MAEfT,EAAS,SAAW,GACpBU,EAAS,MAAM,CACb,MAAO,eACP,QAAS,qCACT,SAAU,QAClB,CAAS,IAEHJ,EAAmBG,EACnBT,EAAS,SAAW,GAEvB,CACH,EAEAW,EAAU,mBAAoBJ,CAAO,EAErC,SAASK,GAAc,CACjBb,EAAS,aAAa,WAAY,EAAI,EACtCC,EAAS,SAAW,GACxBK,EAAa,YAAY,IAAM,CAE7B,MAAMQ,EAAYP,EADF,IAAI,KAEpB,GAAIO,GAAa,EAAG,CAElB,cAAcR,CAAU,EACxBN,EAAS,gBAAgB,UAAU,EACnC,MACD,CACD,MAAMe,EAAOC,EAAUF,CAAS,EAChCG,EAAcF,EAAK,KAAMA,EAAK,MAAOA,EAAK,QAASA,EAAK,OAAO,CAChE,EAAE,GAAI,CACT,CAGAd,EAAS,iBAAiB,QAASY,CAAU,EAG3C,SAASI,EAAcC,EAAMC,EAAOC,EAASC,EAAS,CACpDnB,EAAO,YAAcoB,EAAeJ,CAAI,EACxCf,EAAQ,YAAcmB,EAAeH,CAAK,EAC1Cf,EAAU,YAAckB,EAAeF,CAAO,EAC9Cf,EAAU,YAAciB,EAAeD,CAAO,CAC/C,CAED,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAED,SAASP,EAAUQ,EAAI,CAMrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EACjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,QAAQ,IAAIL,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}